# NIP-10

## 关于文本事件中的 `"e "` 和 `"p "` 标签（kind 1）。

`draft` `optional` `author:unclebobmartin`

## 摘要

本篇 NIP 描述了如何在文本事件中使用 `"e"` 和 `"p"` 标签，特别是那些对其他文本事件的回复。它能帮助客户端将回复穿入以原始事件为根的树中。

## 定位 "e" 标签（已删除）

> 这个方案被普遍使用；但应该被认为是废弃的。

`["e", <event-id>, <relay-url>]`  按照 NIP-01 的规定。

其中：

- `<event-id>` 是被引用的事件的 ID。
- `<relay-url>` 是与引用相关的推荐中继器的 URL。许多客户端将这个字段视为可选项。

#### 事件中 "e "标记位置的具体含义如下：

- 没有 `"e"` 标签：
   这一事件不是对任何其他事件的回复，也不是指其他事件。
   
- 一个 `"e"` 标签：
  `["e", <id>]`: 该事件的 ID，该事件是一个回复。
  
- 两个 `"e"` 标签：
  `<root-id>` 是回复链根部的事件的 id。`<reply-id>` 是该事件作为回复的文章的 id。

- 许多 `"e"` 标签：
  可能有任何数量的`<mention-ids>`。这些是事件的 ID，可能在回复链中，也可能不在。

  它们是这个事件的引用。`root-id`和`reply-id`同上。

> 这个方案被弃用了，因为它产生了模糊性，当一个事件引用另一个事件但不是一个回复时，很难或不可能解决。

## 标记 "e" 标签（更合适的）

`["e", <event-id>, <relay-url>, <marker>]`

其中：

- `<event-id>` 是被引用的事件的 ID。
- `relay-url`是与引用相关的推荐中继器的 URL。它不是可选的。
- `<marker>` 是可选的，如果存在，是 `"reply"` 或 `"root"` 之一。

**标记为 "e "的标签的顺序并不重要**。标有 `"reply"` 的标签表示`<reply-id>`。那些标有 `"root"` 的标签表示回复线程的根 ID。

对线程根部的直接回复应该有一个类型为 "root" 的单一标记 "e" 标签。

> 这种方案更受欢迎，因为它允许事件提及他人，而不会将其与<reply-id>或<root-id>混淆。

## "P" 标签

用在文本事件中，包含一个 pubkeys 列表，用于记录谁参与了回复线程。

当回复一个文本事件 E 时，回复事件的 `"p"`标签应该包含 E 的所有 `"p"` 标签，以及被回复事件的 `"pubkey"`。

例子。给出一个由`a1`撰写的文本事件，其 "p" 标签为 [`p1`, `p2`, `p3`]，那么回复的 "p" 标签应该是[`a1`, `p1`, `p2`, `p3`]，没有特别的顺序。

