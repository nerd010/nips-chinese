# NIP-02

## 联系人列表和昵称（patname）

`final` `optional` `author:fiatjaf` `author:arcbtc`

类型`3` 的特殊事件，意味着“联系人列表”被定义为有`p` 标签的列表，每个被关注的/已知的资料都有一个标签。

每个标签条目都应该包含配置文件的密钥，可以找到该密钥的事件的中继 URL（如果不需要，可以设置为空字符串），以及该配置文件的本地名称（或 "昵称"）（也可以设置为空字符串或不提供），即`["p", <32-bytes hex key>, <main relay URL>, <petname>]`。内容可以是任何东西并且应该被忽略。

例如：

```
{
  "kind": 3,
  "tags": [
    ["p", "91cf9..4e5ca", "wss://alicerelay.com/", "alice"],
    ["p", "14aeb..8dad4", "wss://bobrelay.com/nostr", "bob"],
    ["p", "612ae..e610f", "ws://carolrelay.com/ws", "carol"]
  ],
  "content": "",
  ...other fields
```

每个新发布的联系人名单都会覆盖过去的名单，所以它应该包含所有的条目。中继器和客户端一旦收到新的联系人名单，就应该立即删除过去的联系人名单。

## 使用

### 备份联系人列表

如果人们相信中继器会存储他们的事件足够长的时间，他们可以使用 kind-3 事件来备份他们的以下列表，并在不同的设备上恢复。

### 简介发现和内容概要（Profile discovery and context augmentation）

客户端可以依靠 kind-3 事件来显示正在浏览的资料中被关注人（followed）的列表；根据可能正在关注或浏览的其他人的联系人列表，列出关注对象的建议列表；或者在其他情况下显示数据。

### 中继器分享

客户端可以发布一个完整的联系人名单，并为他们的每个联系人提供良好的中继器，因此其他客户端可以在需要时使用这些名单来更新他们的内部中继器名单，提高抗审查能力。

### 昵称方案

> 在联系人列表中每个公钥都对应着一个用户昵称，这样更具有可读性。

来自这些联系人列表的数据可以被客户端用来构建来自其他人的联系人列表的本地 "昵称"表。这减轻了对全球人类可读名称的需要。比如说。

一个用户有一个内部联系人列表，上面写着

```
[
  ["p", "21df6d143fb96c2ec9d63726bf9edc71", "", "erin"]
]
```

收到两个联系人列表，一个来自`21df6d143fb96c2ec9d63726bf9edc71` 写着

```
[
  ["p", "a8bb3d884d5d90b413d9891fe4c4e46d", "", "david"]
]
```

另一个来自`a8bb3d884d5d90b413d9891fe4c4e46d` 写着

```
[
  ["p", "f57f54057d2a7af0efecc8b0b66f5708", "", "frank"]
]
```

当用户看到`21df6d143fb96c2ec9d63726bf9edc71` 客户端可以改为显示 erin ；当用户看到`a8bb3d884d5d90b413d9891fe4c4e46d` 客户端可以改为显示 david.erin；当用户看到`f57f54057d2a7af0efecc8b0b66f5708` 客户端可以改为显示 frank.david.erin。

